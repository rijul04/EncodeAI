import*as r from"readline/promises";import{service as a,context as l,input as u,extension as p,output as m}from"@daydreamsai/core";import{z as o}from"zod";var d=a({register(e){e.singleton("readline",()=>r.createInterface({input:process.stdin,output:process.stdout}))}}),n=l({type:"cli",key:({user:e})=>e.toString(),schema:{user:o.string()},inputs:{"cli:message":u({async subscribe(e,{container:i}){let c=i.resolve("readline"),s=new AbortController;for(;!s.signal.aborted;){let t=await c.question("> ");if(t==="exit")break;console.log("User:",t),e(n,{user:"admin"},t)}return()=>{s.abort()}}})},outputs:{"cli:message":m({description:"Send messages to the user",instructions:"Use plain text",schema:o.string(),handler(e){return console.log("Agent:",{data:e}),{data:e}},examples:['<output type="cli:message">Hi, How can I assist you today?</output>']})}}),f=p({name:"cli",contexts:{cli:n},services:[d]});export{n as cli,f as cliExtension,d as readlineService};
//# sourceMappingURL=index.js.map